---
apiVersion: v1
kind: Secret
metadata:
  name: glauth-secret
  namespace: security
stringData:
  server.toml: |
    debug = true
    [ldap]
        enabled = true
        listen = "0.0.0.0:389"
    [ldaps]
        enabled = false
    [api]
        enabled = true
        tls = false
        listen = "0.0.0.0:5555"
    [backend]
        datastore = "config"
        baseDN = "dc=home,dc=arpa"
  groups.toml: |
    [[groups]]
        name = "svcaccts"
        gidnumber = 6500
    [[groups]]
        name = "admins"
        gidnumber = 6501
    [[groups]]
        name = "people"
        gidnumber = 6502
  users.toml: |
    [[users]]
        name = "search"
        uidnumber = 5000
        primarygroup = 6500
        passbcrypt = ""
        [[users.capabilities]]
            action = "search"
            object = "*"
    [[users]]
        name = "${GLAUTH_NAME}"
        mail = "${GLAUTH_USERNAME}"
        givenname ="${GLAUTH_NAME}"
        sn ="${GLAUTH_NAME}"
        uidnumber = 5001
        primarygroup = 6502
        othergroups = [ 6501 ]
        passbcrypt = "${GLAUTH_PASSWORD}"
    [[users]]
        name = "${GLAUTH_CHRIS_NAME}"
        mail = "${GLAUTH_CHRIS_USERNAME}"
        givenname ="${GLAUTH_CHRIS_NAME}"
        sn ="${GLAUTH_CHRIS_NAME}"
        uidnumber = 5002
        primarygroup = 6502
        othergroups = [ 6502 ]
        passbcrypt = "${GLAUTH_CHRIS_PASSWORD}"
